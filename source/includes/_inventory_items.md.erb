# Itens do estoque

Um **Item do estoque** representa um produto ou mercadoria.

## A entidade

Estes são os atributos deste resource.

```json
{
  "data": {
    "id": "35b87e73-3fec-4f2c-86dd-6afe36a0dbd2",
    "attributes": {
      "reference-id": "my-custom-id",
      "created-at": "2017-21-04T13:00:00Z",
      "price": 2117990,
      "ad-template-type": "vehicle",
      "link": "https://mywebsite.com/products/volkswagen-gol-2011",
      "fingerprint": "2774a6e29bd8b62a48019831e091f831d0ec08a7",
      "brand": "Volkswagen",
      "model": "Gol",
      "year": 2011,
      "custom-fields": {
        "my-own-key": "some-value",
        "city":  "São Paulo"
      }
    }
  }
}
```

<% table = [] %>
<!-- required -->
<% table << partial("includes/inventory_item_fields/ad_template_type.erb") %>
<% table << partial("includes/inventory_item_fields/availability.erb") %>
<% table << partial("includes/inventory_item_fields/condition.erb") %>
<% table << partial("includes/inventory_item_fields/content_language.erb") %>

<!-- optional -->
<% table << partial("includes/inventory_item_fields/brand.erb") %>
<% table << partial("includes/inventory_item_fields/custom_attributes.erb") %>
<% table << partial("includes/inventory_item_fields/description.erb") %>
<% table << partial("includes/inventory_item_fields/images.erb") %>
<% table << partial("includes/inventory_item_fields/link.erb") %>
<% table << partial("includes/inventory_item_fields/model.erb") %>
<% table << partial("includes/inventory_item_fields/price.erb") %>
<% table << partial("includes/inventory_item_fields/reference_id.erb") %>
<% table << partial("includes/inventory_item_fields/title.erb") %>
<% table << partial("includes/inventory_item_fields/year.erb") %>

<!-- readonly -->
<% table << partial("includes/inventory_item_fields/fingerprint.erb") %>
<% table << partial("includes/inventory_item_fields/sold_out_at.erb") %>
<% table << partial("includes/inventory_item_fields/created_at.erb") %>

Atributos | &nbsp;
------------------- | -----------
<%= table.map { |r| r.gsub(/\n/, " ") }.join("\n") %>

**Mais detalhes**

**ad&#8209;template&#8209;type:** este valor identifica o tipo do item e é usado
para geração de anúncios específicos. Por exemplo,
temos templates de anúncios para itens do tipo `vehicle` (carros).
Portanto, use o valor `vehicle` aqui se o item é um carro.

No editor de templates de anúncios, no painel de administração, você define o
alvo dos templates. Você pode definir templates qualquer tipo. Por exemplo,
se você possui vinhos e quer segmentar os templates, pode criar itens como
`vinho-cabernet-sauvignon` e `vinho-merlot`.

## Criando itens

> Definição <br> `POST /inventory-items`

Para criar um novo item no seu estoque, use este endpoint.

> Quando id é omitido, o item é criado.

```ruby
client = ApiSync.new(api_key: token)
client.inventory_items.save({
  attributes: {
    reference_id: "my-custom-id",
    created_at: "2017-21-04T13:00:00Z",
    price: 2117990,
    ad_template_type: "vehicle",
    link: "https://mywebsite.com/products/volkswagen-gol-2011",
    fingerprint: "2774a6e29bd8b62a48019831e091f831d0ec08a7",
    brand: "Volkswagen",
    model: "Gol",
    year:  2011,
    custom_attributes: {
      my_own_key: "some-value",
      make: "Volkswagen",
      model: "Gol",
      year: 2011,
      city: "São Paulo"
    }
  }
})
```

<% table = [] %>
<!-- required -->
<% table << partial("includes/inventory_item_fields/ad_template_type.erb") %>
<% table << partial("includes/inventory_item_fields/availability.erb") %>
<% table << partial("includes/inventory_item_fields/condition.erb") %>
<% table << partial("includes/inventory_item_fields/content_language.erb") %>

<!-- optional -->
<% table << partial("includes/inventory_item_fields/brand.erb") %>
<% table << partial("includes/inventory_item_fields/custom_attributes.erb") %>
<% table << partial("includes/inventory_item_fields/description.erb") %>
<% table << partial("includes/inventory_item_fields/images.erb") %>
<% table << partial("includes/inventory_item_fields/link.erb") %>
<% table << partial("includes/inventory_item_fields/model.erb") %>
<% table << partial("includes/inventory_item_fields/price.erb") %>
<% table << partial("includes/inventory_item_fields/reference_id.erb") %>
<% table << partial("includes/inventory_item_fields/title.erb") %>
<% table << partial("includes/inventory_item_fields/year.erb") %>

Argumentos | &nbsp;
---------- | -----------
<%= table.map { |r| r.gsub(/\n/, " ") }.join("\n") %>

Em caso de sucesso, você receberá de volta a entidade criada. Caso contrário,
uma mensagem de erro.

Notas:

* ao criar o item, o `fingerprint` será gerado automaticamente.

## Atualizando itens

> Inclua o id para efetuar a atualização.

```ruby
client = ApiSync.new(api_key: token)
client.inventory_items.save({
  id: "35b87e73-3fec-4f2c-86dd-6afe36a0dbd2",
  attributes: {
    reference_id: "my-custom-id",
    created_at: "2017-21-04T13:00:00Z",
    price: 2117990,
    ad_template_type: "vehicle",
    link: "https://mywebsite.com/products/volkswagen-gol-2011",
    fingerprint: "2774a6e29bd8b62a48019831e091f831d0ec08a7",
    brand: "Volkswagen",
    model: "Gol",
    year:  2011,
    custom_attributes: {
      my_own_key: "some-value",
      make: "Volkswagen",
      model: "Gol",
      year: 2011,
      city: "São Paulo"
    }
  }
})
```

`PATCH /inventory-items/:id`

Você deve substituir `:id` pelo ID único do registro que você quer
atualizar.

Estes são os atributos que podem ser atualizados.

<% table = [] %>
<!-- required -->
<% table << partial("includes/inventory_item_fields/ad_template_type.erb") %>
<% table << partial("includes/inventory_item_fields/availability.erb") %>
<% table << partial("includes/inventory_item_fields/condition.erb") %>
<% table << partial("includes/inventory_item_fields/content_language.erb") %>

<!-- optional -->
<% table << partial("includes/inventory_item_fields/brand.erb") %>
<% table << partial("includes/inventory_item_fields/custom_attributes.erb") %>
<% table << partial("includes/inventory_item_fields/description.erb") %>
<% table << partial("includes/inventory_item_fields/images.erb") %>
<% table << partial("includes/inventory_item_fields/link.erb") %>
<% table << partial("includes/inventory_item_fields/model.erb") %>
<% table << partial("includes/inventory_item_fields/price.erb") %>
<% table << partial("includes/inventory_item_fields/reference_id.erb") %>
<% table << partial("includes/inventory_item_fields/title.erb") %>
<% table << partial("includes/inventory_item_fields/year.erb") %>

Argumentos | &nbsp;
---------- | -----------
<%= table.map { |r| r.gsub(/\n/, " ") }.join("\n") %>

Notas:

* ao realizar a modificação, o `fingerprint` será gerado novamente.

Caso a requisição funcione, você receberá de volta a entidade. Caso contrário,
uma mensagem de erro.

## Lendo itens

```shell
curl -H "Authorization: Bearer $TOKEN" "https://api.apisync.io/inventory-items"
```

```ruby
client = ApiSync.new(api_key: token)
client.inventory_items.list
```

> O comando acima retorna um JSON estruturado como este:

```json
{
  "data": [{
    "id": "35b87e73-3fec-4f2c-86dd-6afe36a0dbd2",
    "attributes": {
      "reference-id": "my-custom-id",
      "created-at": "2017-21-04T13:00:00Z",
      "price": 2117990,
      "ad-template-type": "vehicle",
      "link": "https://mywebsite.com/products/volkswagen-gol-2011",
      "fingerprint": "2774a6e29bd8b62a48019831e091f831d0ec08a7",
      "brand": "Volkswagen",
      "model": "Gol",
      "year":  2011,
      "custom-fields": {
        "my-own-key": "some-value",
        "city":  "São Paulo"
      }
    }
  }]
}
```

`GET /inventory-items`

Estes são os possíveis parâmetros:

Parâmetro | Descrição
--------- | -----------
filter    | Para filtrar atributos.
page      | A página que você deseja ver. Se não especificado, o valor é 1.

### Exemplos

`GET /inventory-items?page[number]=3&page[size]=20`

Retorna a terceira página, 20 itens por página.

`GET /inventory-items?filter[reference-id]=my-id`

Retornará apenas itens onde reference&#8209;id é `my-id`.

## Lendo um item

```shell
curl -H "Authorization: Bearer $TOKEN" "https://api.apisync.io/inventory-items/35b87e73-3fec-4f2c-86dd-6afe36a0dbd2"
```

```ruby
client = ApiSync.new(api_key: token)
client.inventory_items.find("35b87e73-3fec-4f2c-86dd-6afe36a0dbd2")
```

> O comando acima retorna um JSON estruturado como este:

```json
{
  "data": {
    "id": "35b87e73-3fec-4f2c-86dd-6afe36a0dbd2",
    "attributes": {
      "reference-id": "my-custom-id",
      "created-at": "2017-21-04T13:00:00Z",
      "price": 2117990,
      "ad-template-type": "vehicle",
      "link": "https://mywebsite.com/products/volkswagen-gol-2011",
      "fingerprint": "2774a6e29bd8b62a48019831e091f831d0ec08a7",
      "brand": "Volkswagen",
      "model": "Gol",
      "year":  2011,
      "custom-fields": {
        "my-own-key": "some-value",
        "city":  "São Paulo"
      }
    }
  }
}
```

`GET /inventory-items/:id`

Você deve especificar o ID do item que você deseja ver.

### Exemplos

`GET /inventory-items/35b87e73-3fec-4f2c-86dd-6afe36a0dbd2`

Retornará apenas o item que tem o ID `35b87e73-3fec-4f2c-86dd-6afe36a0dbd2`.
